<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Training Editor</title>
  <!-- Fabric.js library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
  <!-- SortableJS for drag and drop -->
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  <!-- Google Fonts API -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Open+Sans:wght@400;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
  <!-- CSS includes -->
  <?!= include('css/styles') ?>
  <?!= include('css/animations') ?>
</head>

<body class="editor-view">
  <div id="toolbar">
    <button id="new-button" title="New Project">New</button>
    <button id="save-button" title="Save Project">Save</button>
    <button id="load-button" title="Load Project">Load</button>
    <div class="separator"></div>
    <button id="add-rect-button" title="Add Rectangle">Rectangle</button>
    <button id="add-ellipse-button" title="Add Ellipse">Ellipse</button>
    <button id="add-text-button" title="Add Text">Text</button>
    <div class="separator"></div>
    <button id="delete-button" title="Delete Selected" disabled>Delete</button>
  </div>
  
  <div id="main-content">
    <div id="slide-navigator"></div>
    <div id="canvas-container">
      <canvas id="editor-canvas"></canvas>
    </div>
    <div id="right-sidebar">
      <div id="sidebar-tabs">
        <button class="tab-link active" data-tab="properties-panel">Properties</button>
        <button class="tab-link" data-tab="sequence-panel">Sequence</button>
      </div>
      <div id="properties-panel" class="sidebar-tab-content active"></div>
      <div id="sequence-panel" class="sidebar-tab-content">
        <ul id="sequence-list"></ul>
      </div>
    </div>
  </div>

  <!-- Modals -->
  <div id="text-editor-modal" class="modal"></div>
  <div id="quiz-editor-modal" class="modal"></div>
  <div id="timeline-editor-modal" class="modal"></div>
  <div id="loading-indicator" class="modal">Loading...</div>
  <div id="message-modal" class="modal"></div>

  <!-- JS includes -->
  <?!= include('js/utils') ?>
  <?!= include('js/serverClient') ?>
  <?!= include('js/stateManager') ?>
  <?!= include('js/canvasController') ?>
  <?!= include('js/editorUI') ?>
  <?!= include('js/interactionHandler') ?>
  <?!= include('js/animationController') ?>
  <?!= include('js/fontLoader') ?>
  <?!= include('js/textEditor') ?>
  <?!= include('js/quizEditor') ?>
  <?!= include('js/youtubeManager') ?>
  <?!= include('js/timelineEditor') ?>
  <?!= include('js/main') ?>

  <script>
    document.addEventListener('DOMContentLoaded', () => initializeApp('editor'));
  </script>
</body>
</html>